<!DOCTYPE HTML>
<html id="html">
	<head>
		<title>SCRAM CTF Tester</title>
		<script>
			dojoConfig = {
			"isDebug": true,
			"debugAtAllCosts": true,
			"parseOnLoad": true,
			"baseUrl": "./js/dojo/dojo"
			}
		</script>
		<script type="text/javascript" src="http://127.0.0.1/js/dojo/dojo/dojo.js"></script>
		<script type="text/javascript" charset="utf-8">
			require(["dojox/socket", "dojo/dom-construct", "dojo/_base/array", "dojo/dom-style", "dojo/dom-attr", "dojo/fx", "dijit/form/Button", "dojo/dom", "dojo/fx", "dojo/domReady!"], 
			function(Socket, domConstruct, arrayUtil, domStyle, Button, dom, fx, domAttr) {
				var echoSocket = new Socket("ws://127.0.0.1:10002/api");
				var pingSocket = new Socket("ws://127.0.0.1:10001/api");
				var pollSocket = new Socket("ws://127.0.0.1:8081/api");
				echoSocket.on("message", function(event) {
					var data = event.data;
					console.log("Echo Data", data);
				});
				echoSocket.on("open", function(event) {
					echoSocket.send("hi server");
				});
				pingSocket.on("message", function(event) {
					var data = event.data;
					console.log("Ping Data", data);
				});
				pingSocket.on("open", function(event) {
					pingSocket.send("ping");
				});
				var myButtonClick = function(){
					//make some payload
					var myJSON = {'foo':2,'bar':3}
					//call my socket send func w/ payload
					echoSocket.send(myJSON);

				};
			/*
			 //Edited by Joe Pecsi...not sure if the below is correct or not
				pollSocket.on("message", function(event) {
					var data = event.data;
					console.log("Poll Data", data);
				});
				pollSocket.on("open", function(event) {
					echoSocket.send("Hey guys...polling");
				});
				signupSocket.on("message", function(event) {
					var data = event.data;
					console.log("Signup Data", data);
				});
				signupSocket.on("open", function(event) {
					pingSocket.send("signup");
				});
				loginSocket.on("message", function(event) {
					var data = event.data;
					console.log("User Data", data);
				});
				loginSocket.on("open", function(event) {
					echoSocket.send("hi user");
				});
				rodSocket.on("message", function(event) {
					var data = event.data;
					console.log("Rod State", data);
				});
				rodSocket.on("open", function(event) {
					pingSocket.send("rod change");
				});
				valveSocket.on("message", function(event) {
					var data = event.data;
					console.log("Valve State", data);
				});
				valveSocket.on("open", function(event) {
					pingSocket.send("valve change");
				});
				gaugeSocket.on("message", function(event) {
					var data = event.data;
					console.log("Gauge State", data);
				});
				gaugeSocket.on("open", function(event) {
					echoSocket.send("gauge change");
				});
				
				*/
				
				var bodyDiv = new domConstruct.create("body", {id: 'body'}, "html");
				var mainDiv = new domConstruct.create("div", {id: "main"}, "body");//create main div that will hold the scramBackground image
				
				//construct rods divs and rod buttons
				var rods = new domConstruct.create("img", {id: 'rods', src: 'images/elements/rods.png'}, "main"); //create the rods image

				
				var rodDownButton = new domConstruct.create("div", {id: 'rodDownButton'}, "main"); //create the rod down button div
				var rodUpButton = new domConstruct.create("div", {id: 'rodUpButton'}, "main"); //create the rod up button div	
				
				//construct gagueBottomLeft divs and gagueBottomLeftDown buttons
				var gagueBottomLeftDownButton = new domConstruct.create("div", {id: 'gagueBottomLeftDownButton'}, "main");//create the gague bottom left Down button div
				var gagueBottomLeftUpButton = new domConstruct.create("div", {id: 'gagueBottomLeftUpButton'}, "main");//create the gague bottom left up button div
				var gague_bottom_left_div = new domConstruct.create("div", {id: 'gague_bottom_left_div'}, "main");
				var gague_bottom_left = new domConstruct.create("img", {id: 'gague_bottom_left', src: '1.png', width: "17px", height: '35px'}, "gague_bottom_left_div");
				
				//gague middle bottom
				var gague_middle_bottom = new domConstruct.create("div", {id: 'gague_middle_bottom'}, "main");
				
				//gague top left
				var gague_top_left = new domConstruct.create("div", {id: 'gague_top_left'}, "main");
				
				//gague middle top
				var gague_middle_top = new domConstruct.create("div", {id: 'gague_middle_top'}, "main");
				
				//gague top right
				var gague_top_right = new domConstruct.create("div", {id: 'gague_top_right'}, "main");
				
				var gague1level = 2;
				
				
				
				
				
				//main container tags
				var htmlPos = new domStyle.set("html", "position", "fixed"); //set html tag to a fixed position
				
				var mainStyle = new domStyle.set("main", {
							backgroundImage: 'url(images/background.png)', 
							width: '1000px', height: '601px', 
							backgroundRepeat: 'no-repeat', 
							backgroundSize: '1000px 601px'});
				
				//rods
				

				new domStyle.set("rods", {width: "70px", position: "fixed", left: "92px", top: "100px"}); //max 156 px min 100 px
				
				new domStyle.set("gagueBottomLeftUpButton", {width: "100px"});
				
				new domStyle.set("gague_bottom_left_div", {backgroundColor: "yellow", position: "fixed", top: "450px", left: "236px", width: "30px", height: "40px"});
				
				new domStyle.set("gague_middle_bottom", {backgroundColor: "green", position: "fixed", top: "450px", left: "620px", width: "30px", height: "40px"});
				
				new domStyle.set("gague_top_left", {backgroundColor: "blue", position: "fixed", top: "340px", left: "315px", width: "30px", height: "40px"});
				
				new domStyle.set("gague_middle_top", {backgroundColor: "purple", position: "fixed", top: "340px", left: "628px", width: "30px", height: "40px"});
				
				new domStyle.set("gague_top_right", {backgroundColor: "red", position: "fixed", top: "340px", left: "710px", width: "30px", height: "40px"});
				
				
				//rods
				/* the good one
				var testButton = new dijit.form.Button({
					onClick: function(){
						dojo.fx.slideTo({
								top: 126,
								left: 92,
								node: rods
						}).play();
					}
				}, 'rodDownButton');
*/
				
				var rodlevel = 0;
				
				
				var rod_Down_Button = new dijit.form.Button({
					title: "Rod: Down",
					onClick: function(){ //checks the rod level and slides it down to the appropriate place
						if (rodlevel == 0){
							dojo.fx.slideTo({
								top: 108,
								left: 92,
								node: rods
							}).play();
							rodlevel = 1
						}
						else if (rodlevel == 1){
							dojo.fx.slideTo({
								top: 115,
								left: 92,
								node: rods
							}).play();
							rodlevel = 2
						}
						else if (rodlevel == 2){
							dojo.fx.slideTo({
								top: 120,
								left: 92,
								node: rods
							}).play();
							rodlevel = 3
						}
						else if (rodlevel == 3){
							dojo.fx.slideTo({
								top: 125,
								left: 92,
								node: rods
							}).play();
							rodlevel = 4
						}
						else if (rodlevel == 4){
							dojo.fx.slideTo({
								top: 132,
								left: 92,
								node: rods
							}).play();
							rodlevel = 5
						}
						else if (rodlevel == 5){
							dojo.fx.slideTo({
								top: 138,
								left: 92,
								node: rods
							}).play();
							rodlevel = 6
						}
						else if (rodlevel == 6){
							dojo.fx.slideTo({
								top: 143,
								left: 92,
								node: rods
							}).play();
							rodlevel = 7
						}
						else if (rodlevel == 7){
							dojo.fx.slideTo({
								top: 149,
								left: 92,
								node: rods
							}).play();
							rodlevel = 8
						}
						else if (rodlevel == 8){
							dojo.fx.slideTo({
								top: 156,
								left: 92,
								node: rods
							}).play();
							rodlevel = 9
						}
					}
				}, "rodDownButton");
			
			
			
			
				//Button : Rod : Up
				var rodUpButton = new dijit.form.Button({
					label: "Rod: Up",
					onClick: function(){ //checks the rod level and slides it up to the appropriate place
						if (rodlevel == 9){
							dojo.fx.slideTo({
								top: 149,
								left: 92,
								node: rods
							}).play();
							rodlevel = 8
						}
						else if (rodlevel == 8){
							dojo.fx.slideTo({
								top: 143,
								left: 92,
								node: rods
							}).play();
							rodlevel = 7
						}
						else if (rodlevel == 7){
							dojo.fx.slideTo({
								top: 138,
								left: 92,
								node: rods
							}).play();
							rodlevel = 6
						}
						else if (rodlevel == 6){
							dojo.fx.slideTo({
								top: 132,
								left: 92,
								node: rods
							}).play();
							rodlevel = 5
						}
						else if (rodlevel == 5){
							dojo.fx.slideTo({
								top: 125,
								left: 92,
								node: rods
							}).play();
							rodlevel = 4
						}
						else if (rodlevel == 4){
							dojo.fx.slideTo({
								top: 120,
								left: 92,
								node: rods
							}).play();
							rodlevel = 3
						}
						else if (rodlevel == 3){
							dojo.fx.slideTo({
								top: 115,
								left: 92,
								node: rods
							}).play();
							rodlevel = 2
						}
						else if (rodlevel == 2){
							dojo.fx.slideTo({
								top: 108,
								left: 92,
								node: rods
							}).play();
							rodlevel = 1
						}
						else if (rodlevel == 1){
							dojo.fx.slideTo({
								top: 100,
								left: 92,
								node: rods
							}).play();
							rodlevel = 0
						}
					}
				}, "rodUpButton");
			
//!*!*!*!*!*!*!*!*!*!*!*!*!you need to change the directory*!*!*!*!*!*!*!*!*!*!*!*!*!*!**!*!*!*!*!*!!*
				
				var gagueBottomLeftDownButton = new dijit.form.Button({
					label: "Gauge Bottom Left: Down",
					onClick: function(){ //sets current img source to a variable. checks variable against a set value. Changes picture accordingly
						var currentImg = domAttr.get('gague_bottom_left', 'src');
						if (currentImg == '4.png'){
							domAttr.set('gague_bottom_left', {src: "images/statsValues/3.png", width: "25px", height: '35px'});
						}
						else if (currentImg == '3.png'){
							domAttr.set('gague_bottom_left', {src: "images/statsValues/2.png", width: "20px", height: '35px'});
						}
						else if (currentImg == '2.png'){
							domAttr.set('gague_bottom_left', {src: "images/statsValues/1.png", width: "17px", height: '35px'});
						}
					}
				}, "gagueBottomLeftDownButton");
				
				
				
			}
			
			);
			
		
		</script>
	</head>
</html>