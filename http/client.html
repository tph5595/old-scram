<!DOCTYPE HTML>
<html id="html">
	<head>
		<title>SCRAM CTF Tester</title>
		<script>
			dojoConfig = {
			"isDebug": true,
			"debugAtAllCosts": true,
			"parseOnLoad": true,
			"baseUrl": "./js/dojo/dojo"
			}
		</script>
		<script type="text/javascript" src="http://127.0.0.1/js/dojo/dojo/dojo.js"></script>
		<script type="text/javascript" charset="utf-8">
			require(["dojo/on", "dojox/socket", "dojo/dom-construct", "dojo/_base/array", "dojo/dom-style", "dijit/form/Button", "dojo/dom", "dojo/fx", "dojo/dom-attr", "dojo/domReady!"], 
			function(on, Socket, domConstruct, arrayUtil, domStyle, Button, dom, fx, domAttr) {
				var echoSocket = new Socket("ws://127.0.0.1:10002/api");
				var pingSocket = new Socket("ws://127.0.0.1:10001/api");
				var pollSocket = new Socket("ws://127.0.0.1:8081/api");
				echoSocket.on("message", function(event) {
					var data = event.data;
					console.log("Echo Data", data);
				});
				echoSocket.on("open", function(event) {
					echoSocket.send("hi server");
				});
				pingSocket.on("message", function(event) {
					var data = event.data;
					console.log("Ping Data", data);
				});
				pingSocket.on("open", function(event) {
					pingSocket.send("ping");
				});
				var myButtonClick = function(){
					//make some payload
					var myJSON = {'foo':2,'bar':3}
					//call my socket send func w/ payload
					echoSocket.send(myJSON);

				};
			/*
			 //Edited by Joe Pecsi...not sure if the below is correct or not
				pollSocket.on("message", function(event) {
					var data = event.data;
					console.log("Poll Data", data);
				});
				pollSocket.on("open", function(event) {
					echoSocket.send("Hey guys...polling");
				});
				signupSocket.on("message", function(event) {
					var data = event.data;
					console.log("Signup Data", data);
				});
				signupSocket.on("open", function(event) {
					pingSocket.send("signup");
				});
				loginSocket.on("message", function(event) {
					var data = event.data;
					console.log("User Data", data);
				});
				loginSocket.on("open", function(event) {
					echoSocket.send("hi user");
				});
				rodSocket.on("message", function(event) {
					var data = event.data;
					console.log("Rod State", data);
				});
				rodSocket.on("open", function(event) {
					pingSocket.send("rod change");
				});
				valveSocket.on("message", function(event) {
					var data = event.data;
					console.log("Valve State", data);
				});
				valveSocket.on("open", function(event) {
					pingSocket.send("valve change");
				});
				gaugeSocket.on("message", function(event) {
					var data = event.data;
					console.log("Gauge State", data);
				});
				gaugeSocket.on("open", function(event) {
					echoSocket.send("gauge change");
				});
				
				*/
				
				var bodyDiv = new domConstruct.create("body", {id: 'body', class: 'claro'}, "html");
				var mainDiv = new domConstruct.create("div", {id: "main"}, "body");//create main div that will hold the scramBackground image
				
				//construct rods divs and rod buttons
				var rods = new domConstruct.create("img", {id: 'rods', src: 'images/elements/rods.png'}, "main"); //create the rods image

				
				var rodDownButton = new domConstruct.create("div", {id: 'rodDownButton'}, "main"); //create the rod down button div
				var rodUpButton = new domConstruct.create("div", {id: 'rodUpButton'}, "main"); //create the rod up button div	
				
				//construct gaugeBottomLeft divs and gaugeBottomLeftDown buttons
				var gaugeBottomLeftDownButton = new domConstruct.create("div", {id: 'gaugeBottomLeftDownButton'}, "main");//create the gauge bottom left Down button div
				var gaugeBottomLeftUpButton = new domConstruct.create("div", {id: 'gaugeBottomLeftUpButton'}, "main");//create the gauge bottom left up button div
				var gauge_bottom_left_div = new domConstruct.create("div", {id: 'gauge_bottom_left_div'}, "main");
				var gauge_bottom_left = new domConstruct.create("img", {id: 'gauge_bottom_left', src: 'images/gaugeValues/0.png', width: "25px", height: '35px'}, "gauge_bottom_left_div");
				
				//gauge middle bottom
				var gaugeMiddleBottomDownButton = new domConstruct.create('div', {id: 'gaugeMiddleBottomDownButton'}, 'main');
				var gaugeMiddleBottomUpButton = new domConstruct.create('div', {id: 'gaugeMiddleBottomUpButton'}, 'main');
				var gauge_middle_bottom_div = new domConstruct.create("div", {id: 'gauge_middle_bottom_div'}, "main");
				var gauge_middle_bottom = new domConstruct.create("img", {id: 'gauge_middle_bottom', src: 'images/gaugeValues/0.png', width: "25px", height: '35px'}, 'gauge_middle_bottom_div')
				
				
				
				//gauge top left
				var gaugeTopLeftDownButton = new domConstruct.create('div', {id: 'gaugeTopLeftDownButton'}, 'main');
				var gaugeTopLeftUpButton = new domConstruct.create('div', {id: 'gaugeTopLeftUpButton'}, 'main');
				var gauge_top_left_div = new domConstruct.create("div", {id: 'gauge_top_left_div'}, "main");
				var gauge_top_left = new domConstruct.create('img', {id: 'gauge_top_left', src: 'images/gaugeValues/0.png', width: "25px", height: '35px'}, 'gauge_top_left_div');
				
				//gauge middle top
				var gaugeMiddleTopDownButton = new domConstruct.create('div', {id: 'gaugeMiddleTopDownButton'}, 'main');
				var gaugeMiddleTopUpButton = new domConstruct.create('div', {id: 'gaugeMiddleTopUpButton'}, 'main');
				var gauge_middle_top_div = new domConstruct.create("div", {id: 'gauge_middle_top_div'}, "main");
				var gauge_middle_top = new domConstruct.create('img', {id: 'gauge_middle_top', src: 'images/gaugeValues/0.png', width: "25px", height: '35px'}, 'gauge_middle_top_div');
				
				//gauge top right
				var gaugeTopRightDownButton = domConstruct.create('div', {id: 'gaugeTopRightDownButton'}, 'main');
				var gaugeTopRightUpButton = domConstruct.create('div', {id: 'gaugeTopRightUpButton'}, 'main');
				var gauge_top_right_div = new domConstruct.create("div", {id: 'gauge_top_right_div'}, "main");
				var gauge_top_right = new domConstruct.create('img', {id: 'gauge_top_right', src: 'images/gaugeValues/0.png', width: "25px", height: '35px'}, 'gauge_top_right_div');
				
				//stats bar
				var stats_0 = new domConstruct.create("img", {id: 'stats_0', src: 'images/statsValues/0.png'}, 'main');
				var stats_1 = new domConstruct.create('img', {id: 'stats_1', src: 'images/statsValues/1.png'}, 'main');
				
				var gauge1level = 2;
				
				
				
				
				
				//main container tags
				var htmlPos = new domStyle.set("html", "position", "fixed"); //set html tag to a fixed position
				
				var mainStyle = new domStyle.set("main", {
							backgroundImage: 'url(images/background.png)', 
							width: '1000px', height: '601px', 
							backgroundRepeat: 'no-repeat', 
							backgroundSize: '1000px 601px'});
				
				//rods
				

				new domStyle.set("rods", {width: "68px", position: "fixed", left: "92px", top: "100px"}); //max 156 px min 100 px
				
				new domStyle.set("gauge_bottom_left_div", {position: "fixed", top: "453px", left: "235px", width: "30px", height: "40px"});
				new domStyle.set('gaugeBottomLeftDownButton', {position: "fixed", top: "453px", left: "150px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/downBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});
				new domStyle.set('gaugeBottomLeftUpButton', {position: "fixed", top: "453px", left: "300px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/upBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});

				
				new domStyle.set("gauge_middle_bottom_div", {position: "fixed", top: "453px", left: "624px", width: "30px", height: "40px"});
				new domStyle.set('gaugeMiddleBottomDownButton', {position: "fixed", top: "453px", left: "560px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/downBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});
				new domStyle.set('gaugeMiddleBottomUpButton', {position: "fixed", top: "453px", left: "675px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/upBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});

				
				new domStyle.set("gauge_top_left_div", {position: "fixed", top: "340px", left: "317px", width: "30px", height: "40px"});
				new domStyle.set('gaugeTopLeftDownButton', {position: "fixed", top: "340px", left: "250px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/downBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});
				new domStyle.set('gaugeTopLeftUpButton', {position: "fixed", top: "340px", left: "350px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/upBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});

				
				new domStyle.set("gauge_middle_top_div", {position: "fixed", top: "340px", left: "629px", width: "30px", height: "40px"});
				new domStyle.set('gaugeMiddleTopDownButton', {position: "fixed", top: "365px", left: "550px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/downBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});
				new domStyle.set('gaugeMiddleTopUpButton', {position: "fixed", top: "335px", left: "550px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/upBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});

				
				new domStyle.set("gauge_top_right_div", {position: "fixed", top: "340px", left: "711px", width: "30px", height: "40px"});
				new domStyle.set('gaugeTopRightDownButton', {position: "fixed", top: "365px", left: "780px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/downBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});
				new domStyle.set('gaugeTopRightUpButton', {position: "fixed", top: "335px", left: "780px", height: '20px', width: '40px', backgroundImage: 'url(images/elements/upBtn.png)', backgroundSize: '40px 20px', backgroundRepeat: 'no-repeat'});

				
				new domStyle.set('stats_0', {width: '30px', height: '40px', position: 'fixed', top: '500px', left: '970px'});
				new domStyle.set('stats_1', {width: '15px', height: '40px', position: 'fixed', top: '500px', left: '940px'});
				
				//rods
				

				

				var rodlevel = 0;
				
				
				var rod_Down_Button = new dijit.form.Button({
					backgroundImage: 'url(images/elements/upBtn.png)',
					title: "Rod: Down",
					onClick: function(){ //checks the rod level and slides it down to the appropriate place
						if (rodlevel == 0){
							dojo.fx.slideTo({
								top: 108,
								left: 92,
								node: rods
							}).play();
							rodlevel = 1
						}
						else if (rodlevel == 1){
							dojo.fx.slideTo({
								top: 115,
								left: 92,
								node: rods
							}).play();
							rodlevel = 2
						}
						else if (rodlevel == 2){
							dojo.fx.slideTo({
								top: 120,
								left: 92,
								node: rods
							}).play();
							rodlevel = 3
						}
						else if (rodlevel == 3){
							dojo.fx.slideTo({
								top: 125,
								left: 92,
								node: rods
							}).play();
							rodlevel = 4
						}
						else if (rodlevel == 4){
							dojo.fx.slideTo({
								top: 132,
								left: 92,
								node: rods
							}).play();
							rodlevel = 5
						}
						else if (rodlevel == 5){
							dojo.fx.slideTo({
								top: 138,
								left: 92,
								node: rods
							}).play();
							rodlevel = 6
						}
						else if (rodlevel == 6){
							dojo.fx.slideTo({
								top: 143,
								left: 92,
								node: rods
							}).play();
							rodlevel = 7
						}
						else if (rodlevel == 7){
							dojo.fx.slideTo({
								top: 149,
								left: 92,
								node: rods
							}).play();
							rodlevel = 8
						}
						else if (rodlevel == 8){
							dojo.fx.slideTo({
								top: 156,
								left: 92,
								node: rods
							}).play();
							rodlevel = 9
						}
					}
				}, "rodDownButton");
			
			
			
			
				//Button : Rod : Up
				var rodUpButton = new dijit.form.Button({
					label: "Rod: Up",
					onClick: function(){ //checks the rod level and slides it up to the appropriate place
						if (rodlevel == 9){
							dojo.fx.slideTo({
								top: 149,
								left: 92,
								node: rods
							}).play();
							rodlevel = 8
						}
						else if (rodlevel == 8){
							dojo.fx.slideTo({
								top: 143,
								left: 92,
								node: rods
							}).play();
							rodlevel = 7
						}
						else if (rodlevel == 7){
							dojo.fx.slideTo({
								top: 138,
								left: 92,
								node: rods
							}).play();
							rodlevel = 6
						}
						else if (rodlevel == 6){
							dojo.fx.slideTo({
								top: 132,
								left: 92,
								node: rods
							}).play();
							rodlevel = 5
						}
						else if (rodlevel == 5){
							dojo.fx.slideTo({
								top: 125,
								left: 92,
								node: rods
							}).play();
							rodlevel = 4
						}
						else if (rodlevel == 4){
							dojo.fx.slideTo({
								top: 120,
								left: 92,
								node: rods
							}).play();
							rodlevel = 3
						}
						else if (rodlevel == 3){
							dojo.fx.slideTo({
								top: 115,
								left: 92,
								node: rods
							}).play();
							rodlevel = 2
						}
						else if (rodlevel == 2){
							dojo.fx.slideTo({
								top: 108,
								left: 92,
								node: rods
							}).play();
							rodlevel = 1
						}
						else if (rodlevel == 1){
							dojo.fx.slideTo({
								top: 100,
								left: 92,
								node: rods
							}).play();
							rodlevel = 0
						}
					}
				}, "rodUpButton");
			
/*
				var testButton = new domConstruct.create("div", {id: 'test'}, 'body');
				new domStyle.set('test', {height: '100px', width: '100px', backgroundImage: 'url(images/elements/upBtn.png)', backgroundRepeat: 'no-repeat'});
				var myScopedButton = dojo.byId('test');
				var myClick = {
						id: 'myClick',
						onClick: function(){
								alert('hello there');
						}
				};
				var handle = on(myScopedButton, "click", myClick.onClick);
*/

				gaugeBLCount = 0;
				var gaugeBLDButton = {
					label: "Gauge Bottom Left: Down",
					showLabel: false,
					onClick: function(){
						switch(gaugeBLCount){
							case 4:
								domAttr.set('gauge_bottom_left', {src: "images/gaugeValues/3.png", width: "25px", height: '35px'});
								gaugeBLCount -= 1;
								break;
							case 3:
								domAttr.set('gauge_bottom_left', {src: "images/gaugeValues/2.png", width: "20px", height: '35px'});
								gaugeBLCount -= 1;
								break;
							case 2:
								domAttr.set('gauge_bottom_left', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeBLCount -= 1;
								break;
							case 1:
								domAttr.set('gauge_bottom_left', {src: "images/gaugeValues/0.png", width: "25px", height: '35px'});
								gaugeBLCount -= 1;
								break;
							}	
						
						}
					} ;
					var gaugeBLDButtonId = dojo.byId('gaugeBottomLeftDownButton');
					var handleBLD = on(gaugeBLDButtonId, "click", gaugeBLDButton.onClick);
				
				var gaugeBLUButton = {
					label: "Gauge Bottom Left: Up",
					showLabel: false,
					onClick: function(){
						switch(gaugeBLCount){
							case 0:
								domAttr.set('gauge_bottom_left', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeBLCount += 1;
								break;
							case 1:
								domAttr.set('gauge_bottom_left', {src: "images/gaugeValues/2.png", width: "20px", height: '35px'});
								gaugeBLCount += 1;
								break;
							case 2:
								domAttr.set('gauge_bottom_left', {src: "images/gaugeValues/3.png", width: "20px", height: '35px'});
								gaugeBLCount += 1;
								break;
							case 3:
								domAttr.set('gauge_bottom_left', {src: "images/gaugeValues/4.png", width: "25px", height: '35px'});
								gaugeBLCount += 1;
								break;
							}	
						
						}
					};
					var gaugeBLUButtonId = dojo.byId('gaugeBottomLeftUpButton');
					var handleBLU = on(gaugeBLUButtonId, "click", gaugeBLUButton.onClick);




				gaugeMBCount = 0;
				var gaugeMBDButton = {
					label: "Gauge Middle Bottom: Down",
					showLabel: false,
					onClick: function(){
						switch(gaugeMBCount){
							case 3:
								domAttr.set('gauge_middle_bottom', {src: "images/gaugeValues/2.png", width: "20px", height: '35px'});
								gaugeMBCount -= 1;
								break;
							case 2:
								domAttr.set('gauge_middle_bottom', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeMBCount -= 1;
								break;
							case 1:
								domAttr.set('gauge_middle_bottom', {src: "images/gaugeValues/0.png", width: "25px", height: '35px'});
								gaugeMBCount -= 1;
								break;
							}	
						
						}
					};
					var gaugeMBDButtonId = dojo.byId('gaugeMiddleBottomDownButton');
					var handleMBD = on(gaugeMBDButtonId, "click", gaugeMBDButton.onClick);


				var gaugeMBUButton = {
					label: "Gauge Middle Bottom: Up",
					showLabel: false,
					onClick: function(){
						switch(gaugeMBCount){
							case 0:
								domAttr.set('gauge_middle_bottom', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeMBCount += 1;
								break;
							case 1:
								domAttr.set('gauge_middle_bottom', {src: "images/gaugeValues/2.png", width: "20px", height: '35px'});
								gaugeMBCount += 1;
								break;
							case 2:
								domAttr.set('gauge_middle_bottom', {src: "images/gaugeValues/3.png", width: "20px", height: '35px'});
								gaugeMBCount += 1;
								break;
							}	
						
						}
					};
					var gaugeMBUButtonId = dojo.byId('gaugeMiddleBottomUpButton');
					var handleMBU = on(gaugeMBUButtonId, "click", gaugeMBUButton.onClick);


				gaugeTLCount = 0;
				var gaugeTLDButton = {
					label: "Gauge Top Left: Down",
					showLabel: false,
					onClick: function(){
						switch(gaugeTLCount){
							case 4:
								domAttr.set('gauge_top_left', {src: "images/gaugeValues/3.png", width: "25px", height: '35px'});
								gaugeTLCount -= 1;
								break;
							case 3:
								domAttr.set('gauge_top_left', {src: "images/gaugeValues/2.png", width: "20px", height: '35px'});
								gaugeTLCount -= 1;
								break;
							case 2:
								domAttr.set('gauge_top_left', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeTLCount -= 1;
								break;
							case 1:
								domAttr.set('gauge_top_left', {src: "images/gaugeValues/0.png", width: "25px", height: '35px'});
								gaugeTLCount -= 1;
								break;
							}	
						
						}
					};
					var gaugeTLDButtonId = dojo.byId('gaugeTopLeftDownButton');
					var handleTLD = on(gaugeTLDButtonId, "click", gaugeTLDButton.onClick);


				var gaugeTLUButton = {
					label: "Gauge Top Left: Up",
					showLabel: false,
					onClick: function(){
						switch(gaugeTLCount){
							case 0:
								domAttr.set('gauge_top_left', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeTLCount += 1;
								break;
							case 1:
								domAttr.set('gauge_top_left', {src: "images/gaugeValues/2.png", width: "20px", height: '35px'});
								gaugeTLCount += 1;
								break;
							case 2:
								domAttr.set('gauge_top_left', {src: "images/gaugeValues/3.png", width: "20px", height: '35px'});
								gaugeTLCount += 1;
								break;
							case 3:
								domAttr.set('gauge_top_left', {src: "images/gaugeValues/4.png", width: "25px", height: '35px'});
								gaugeTLCount += 1;
								break;
							}	
						
						}
					};
					var gaugeTLUButtonId = dojo.byId('gaugeTopLeftUpButton');
					var handleTLU = on(gaugeTLUButtonId, "click", gaugeTLUButton.onClick);


				gaugeMTCount = 0;
				var gaugeMTDButton = {
					label: "Gauge MiddleTop: Down",
					showLabel: false,
					onClick: function(){
						switch(gaugeMTCount){
							case 2:
								domAttr.set('gauge_middle_top', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeMTCount -= 1;
								break;
							case 1:
								domAttr.set('gauge_middle_top', {src: "images/gaugeValues/0.png", width: "25px", height: '35px'});
								gaugeMTCount -= 1;
								break;
							}	
						
						}
					};
					var gaugeMTDButtonId = dojo.byId('gaugeMiddleTopDownButton');
					var handleMTD = on(gaugeMTDButtonId, "click", gaugeMTDButton.onClick);


				var gaugeMTUButton = {
					label: "Gauge Middle Top: Up",
					showLabel: false,
					onClick: function(){
						switch(gaugeMTCount){
							case 0:
								domAttr.set('gauge_middle_top', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeMTCount += 1;
								break;
							case 1:
								domAttr.set('gauge_middle_top', {src: "images/gaugeValues/2.png", width: "20px", height: '35px'});
								gaugeMTCount += 1;
								break;
							}	
						
						}
					};
					var gaugeMTUButtonId = dojo.byId('gaugeMiddleTopUpButton');
					var handleMTU = on(gaugeMTUButtonId, "click", gaugeMTUButton.onClick);



				gaugeTRCount = 0;
				var gaugeTRDButton = {
					label: "Gauge Top Right: Down",
					showLabel: false,
					onClick: function(){
						switch(gaugeTRCount){
							case 2:
								domAttr.set('gauge_top_right', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeTRCount -= 1;
								break;
							case 1:
								domAttr.set('gauge_top_right', {src: "images/gaugeValues/0.png", width: "25px", height: '35px'});
								gaugeTRCount -= 1;
								break;
							}	
						
						}
					};
					var gaugeTRDButtonId = dojo.byId('gaugeTopRightDownButton');
					var handleTRD = on(gaugeTRDButtonId, "click", gaugeTRDButton.onClick);


				var gaugeTRUButton = {
					showLabel: false,
					label: "Gauge Top Right: Up",
					onClick: function(){
						switch(gaugeTRCount){
							case 0:
								domAttr.set('gauge_top_right', {src: "images/gaugeValues/1.png", width: "17px", height: '35px'});
								gaugeTRCount += 1;
								break;
							case 1:
								domAttr.set('gauge_top_right', {src: "images/gaugeValues/2.png", width: "20px", height: '35px'});
								gaugeTRCount += 1;
								break;
							}	
						
						}
					};
					var gaugeTRUButtonId = dojo.byId('gaugeTopRightUpButton');
					var handleTRU = on(gaugeTRUButtonId, "click", gaugeTRUButton.onClick);
				
			});
			
		
		</script>
	</head>
</html>