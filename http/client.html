<!DOCTYPE HTML>
<html>
	<head>
		<title>SCRAM CTF Tester</title>
		<script>
			dojoConfig = {
			"isDebug": true,
			"debugAtAllCosts": true,
			"parseOnLoad": true,
			"baseUrl": "./js/dojo/dojo"
			}
		</script>
		<script type="text/javascript" src="http://127.0.0.1/js/dojo/dojo/dojo.js"></script>
		<script type="text/javascript" charset="utf-8">
			require(["dojox/socket", "dojo/domReady!"], function(Socket) {
				var echoSocket = new Socket("ws://127.0.0.1:10002/api");
				var pingSocket = new Socket("ws://127.0.0.1:10001/api");
				
				//Sockets added in by Joe Pecsi on 06/10/2013
				var pollSocket = new Socket("ws://127.0.0.1:8081/api");
				var userSocket = new Socket("ws://127.0.0.1:8082/api");
				var rodSocket = new Socket("ws://127.0.0.1:8083/api");
				var valveSocket = new Socket("ws://127.0.0.1:8084/api");
				var gaugeSocket = new Socket("ws://127.0.0.1:8085/api");
			
		
				
				
				echoSocket.on("message", function(event) {
					var data = event.data;
					console.log("Echo Data", data);
				});
				echoSocket.on("open", function(event) {
					echoSocket.send("hi server");
				});
				pingSocket.on("message", function(event) {
					var data = event.data;
					console.log("Ping Data", data);
				});
				pingSocket.on("open", function(event) {
					pingSocket.send("ping");
				});
				var myButtonClick = function(){
					//make some payload
					var myJSON = {'foo':2,'bar':3}
					//call my socket send func w/ payload
					echoSocket.send(myJSON);

				}
				
				 //Edited by Joe Pecsi...not sure if the below is correct or not
		                pollSocket.on("message", function(event) {
		                    var data = event.data;
		                    console.log("Poll Data", data);
		                });
		                pollSocket.on("open", function(event) {
		                    echoSocket.send("Hey guys...polling");
		                });
		                signupSocket.on("message", function(event) {
		                    var data = event.data;
		                    console.log("Signup Data", data);
		                });
		                signupSocket.on("open", function(event) {
		                    pingSocket.send("signup");
		                });
		                loginSocket.on("message", function(event) {
		                    var data = event.data;
		                    console.log("User Data", data);
		                });
		                loginSocket.on("open", function(event) {
		                    echoSocket.send("hi user");
		                });
		                rodSocket.on("message", function(event) {
		                    var data = event.data;
		                    console.log("Rod State", data);
		                });
		                rodSocket.on("open", function(event) {
		                    pingSocket.send("rod change");
		                });
		                valveSocket.on("message", function(event) {
		                    var data = event.data;
		                    console.log("Valve State", data);
		                });
		                valveSocket.on("open", function(event) {
		                    pingSocket.send("valve change");
		                });
		                gaugeSocket.on("message", function(event) {
		                    var data = event.data;
		                    console.log("Gauge State", data);
		                });
		                gaugeSocket.on("open", function(event) {
		                    echoSocket.send("gauge change");
		                });
			});

		</script>
	</head>
	<body>
		<h1>Send:</h1>
		<form method='POST' action='#'>
			<textarea name='data' id="data"></textarea>
			<div>
				<input type='submit'>
			</div>
		</form>
		<h1>Receive:</h1>
		<div id="log"></div>
	</body>
</html>
